<div class="escolha-container">
  <!-- Header -->
  <header class="header-top">
    <div class="header-content">
      <!-- Logo -->
      <div class="logo">
        <img src="/assets/logo-aldebaran.png" alt="Aldebaran" class="logo-img">
      </div>

      <!-- Center Content (Filial + Language) -->
      <div class="header-center">
        <!-- Filial Dropdown -->
        <div class="filial-dropdown">
          <label>Filial</label>
          <select [(ngModel)]="filialSelecionada" class="dropdown-select">
            <option value="">Selecione...</option>
            <option value="1">Filial 1</option>
            <option value="2">Filial 2</option>
          </select>
        </div>

        <!-- Language Selector -->
        <div class="language-selector">
          <label>Language</label>
          <div class="language-buttons">
            <button 
              class="lang-btn" 
              [class.active]="idiomaAtivo === 'PT'"
              (click)="trocarIdioma('PT')">
              PT
            </button>
            <button 
              class="lang-btn" 
              [class.active]="idiomaAtivo === 'EN'"
              (click)="trocarIdioma('EN')">
              EN
            </button>
          </div>
        </div>
      </div>

      <!-- User Profile -->
      <div class="user-profile">
        <div class="user-info">
          <strong>{{ operadorNome }}</strong>
          <small>{{ operadorPerfil }}</small>
        </div>
        <div class="user-avatar">
          <span>{{ operadorAvatar }}</span>
        </div>
      </div>

      <!-- Logout Icon -->
      <button class="logout-icon" (click)="logout()" title="Sair">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <polyline points="16 17 21 12 16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <line x1="21" y1="12" x2="9" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </header>

  <div class="content">
    <div class="header">
      <h1>Onde você vai trabalhar hoje?</h1>
      <p>Selecione um guichê disponível para iniciar o atendimento.</p>
    </div>

    <div class="guiches-grid">
      <!-- Card para cada guichê -->
      <div *ngFor="let guiche of guiches" 
           class="guiche-card" 
           [class.ocupado]="guiche.ocupado"
           [class.disponivel]="!guiche.ocupado"
           (click)="selecionar(guiche)">
        
        <!-- Header do Card: Número + Badge Status -->
        <div class="card-header">
          <span class="guiche-numero">GUICHÊ {{ guiche.numero }}</span>
          <span class="status-badge" 
                [class.badge-ocupado]="guiche.ocupado"
                [class.badge-disponivel]="!guiche.ocupado">
            {{ guiche.ocupado ? 'OCUPADO' : 'DISPONÍVEL' }}
          </span>
        </div>

        <!-- Corpo do Card: Info do Operador (se ocupado) -->
        <div *ngIf="guiche.ocupado" class="card-body">
          <div class="operador-info">
            <div class="avatar-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="8" r="4" stroke="#9ca3af" stroke-width="2"/>
                <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" stroke="#9ca3af" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <div class="info-texto">
              <strong>{{ guiche.operador }}</strong>
              <small>Logado desde {{ guiche.logado }}</small>
            </div>
          </div>
        </div>

        <!-- Corpo do Card: Ícone (se disponível) -->
        <div *ngIf="!guiche.ocupado" class="card-body disponivel-body">
          <div class="icon-monitor">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="2" y="3" width="20" height="14" rx="2" stroke="#00838f" stroke-width="2"/>
              <path d="M8 21h8M12 17v4" stroke="#00838f" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <p class="pronto-texto">Pronto para uso</p>
        </div>

        <!-- Footer do Card: Código de Atendimento (ocupado) ou Botão Selecionar (disponível) -->
        <div class="card-footer">
          <div *ngIf="guiche.ocupado" class="atendimento-info">
            <small>Atendendo</small>
            <strong>{{ guiche.codigoAtendimento }}</strong>
          </div>
          <button *ngIf="!guiche.ocupado" class="btn-selecionar">
            Selecionar Guichê
          </button>
        </div>
      </div>
    </div>

    <div class="logout">
      <a href="#">Sair / Fazer Logout</a>
    </div>
  </div>
</div>
