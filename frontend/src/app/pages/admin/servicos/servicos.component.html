<div class="page-container">
  <div class="page-header">
    <div class="icon-box"><lucide-icon [img]="icons.settings"></lucide-icon></div>
    <div><h1>Configurar Serviços</h1><p>Gerencie as filas do Totem.</p></div>
  </div>

  <div class="card form-card" [class.editing]="editando">
    <div class="card-header">
      <h3><lucide-icon [img]="editando?icons.edit:icons.plus"></lucide-icon> {{ editando?'Editar':'Novo' }}</h3>
      <button *ngIf="editando" (click)="limpar()" class="btn-cancel"><lucide-icon [img]="icons.x" size="16"></lucide-icon> Cancelar</button>
    </div>
    <div class="form-row">
      <div class="input-group flex-2"><label>NOME</label><input [(ngModel)]="form.nome" placeholder="Ex: Prioritário"></div>
      <div class="input-group flex-1"><label>SIGLA</label><input [(ngModel)]="form.sigla" placeholder="PRI" maxlength="3" class="uppercase"></div>
      <button class="btn-primary" [class.btn-warn]="editando" (click)="salvar()" [disabled]="loading">{{ loading?'...':(editando?'Salvar':'Adicionar') }}</button>
    </div>
  </div>

  <div class="card list-card">
    <table>
      <thead><tr><th width="120">STATUS</th><th>NOME</th><th>SIGLA</th><th class="text-right">AÇÕES</th></tr></thead>
      <tbody>
        <tr *ngFor="let s of servicos" [class.inactive]="!s.ativo">
          <td><button class="btn-toggle" [class.active]="s.ativo" (click)="toggleStatus(s)"><lucide-icon [img]="icons.power" size="14"></lucide-icon> {{ s.ativo?'ATIVO':'INATIVO' }}</button></td>
          <td class="fw-bold">{{ s.nome }}</td>
          <td><span class="badge">{{ s.sigla }}</span></td>
          <td class="text-right">
            <button class="btn-icon" (click)="editar(s)"><lucide-icon [img]="icons.edit" size="16"></lucide-icon></button>
            <button class="btn-icon delete" (click)="excluir(s.id)"><lucide-icon [img]="icons.trash" size="16"></lucide-icon></button>
          </td>
        </tr>
        <tr *ngIf="servicos.length===0"><td colspan="4" class="empty">Nenhum serviço.</td></tr>
      </tbody>
    </table>
  </div>
</div>